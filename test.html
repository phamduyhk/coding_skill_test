<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>02:00 - Pitchtimer</title>

    <meta name="Description" content="PitchTimer is a simple countdown timer.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="title" content="PitchTimer">
    <link rel="stylesheet" href="./timer.css" type="text/css" media="screen" title="Normal">
    <link href="https://fonts.googleapis.com/css?family=Overpass" rel="stylesheet">
  </head>

  <body>
    <div id="textWrapper">
      <h2>02:00</h2>
    </div>
    <div id="progressText"></div>

    <audio id="alarm" style="display:none;" preload="auto" autobuffer="" src="./timeUp.mp3" type="audio/mpeg">
    </audio>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

    <script type="text/javascript">
      Pitch.defaultText = "Pitchtimer";
      Pitch.startTime = 0;
      Pitch.endTime = 2*60*1000;
      Pitch.parseError = "none";
      Pitch.volume = 1;
      Pitch.canAlert = True;
      $(document).ready(function(){
        Pitch.start();
        startTimer();
      });
      function startTimer() {
          var countDownTime = 2*60; //秒単位
          var minutes = Math.floor(countDownTime / 60);
          var seconds = countDownTime - minutes * 60;
          var text = minutes + "minutes" + seconds + "seconds";
        	$('#progressText').text(text);
          cnDown = setInterval(function(){ //1秒おきにカウントマイナス
            countDownTime -= 1;
            minutes = Math.floor(countDownTime / 60);
            seconds = countDownTime - minutes * 60;
            text = minutes + "minutes" + seconds + "seconds";
            if(countDownTime <= 0){//0になったら停止する
                clearInterval(cnDown);
                text = "Time Expired!";
            }
            $('#progressText').text(text);
        },countDownTime*1000);
      }
    </script>
    <script src="./Pitch3.js" type="text/javascript"></script>
    <script src="./Time.js" type="text/javascript"></script>
    <style type="text/css">
      #progressText{
        font-size: 40px;
        text-align: center;
        font-family: "Overpass";
      }

    </style>

  </body>
</html>
